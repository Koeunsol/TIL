# 191009 Statistics by 재명

## 시계열 분석

### 시계열
- 동일한 변수의 시간에 따른 변동을 나타낸 데이터
- 생존분석은 개개인의 분석 / 어떤 식으로 빠지는지 / 기존의 고객
- 시계열은 전체의 흐름 / 기존의 고객뿐 아니라 새로운 고객까지
- 증가했다 감소했다 반복하는 패턴의 그래프 (생존은 감소하는 그래프)

### 주요 개념
- 자기 상관(autocorrelation) : 자기 자신과 같이 움직이냐하는? / 이전의 값과 이후의 값 사이에 상관이 존재
    - 자기 상관이 (-) ; 이전의 값이 감소하면 이후의 값은 증가하고, 이전의 값이 증가하면 이후의 값은 감소하는 패턴
    - 자기 상관이 (+) ; 한 번 평균선 위로 올라가면 평균선 아래로 잘 떨어지지 않고, 한 번 떨어지면 잘 올라가지 않는 패턴 (ex. 화학 공정의 품질)
- 추세(trend) : 장기적인 추세 / 경향
- 계절성(seasonality) : 주기적인 변동 / 큰 흐름
    - 긴 기간에 걸친 자기상관이라고 볼 수 있음
    - 긴 주기로 움직이는 패턴
    - 계절성이라는 이름을 쓰지만 계절이 아닌, 긴 주기의 패턴을 모두 뜻하는 말
- 정상(stationary) : 시계열의 구조가 일정한 상태(normal의 뜻이 아님)
    - 비정상(non-stationary) : 패턴이 다름 / 분석이 어려움
    - 추세가 있다면 비정상
- 이상점(outlier) : 다른 자료와는 극단적으로 다른 값
    - 이상점이 있으면 분석 결과가 이상하게 나올 수 있음
    - 시계열 데이터의 이상점은 처리하기가 까다로움 / 그냥 이상점을 삭제해버리면 중간에 빈 구간이 생김

## 정상성 검정
- 시계열 데이터를 받으면 다른 분석을 하기 전에 정상성 검정 
- 비정상 : 바뀌는 부분이 있다는 것
- 바뀌는 부분과 안 바뀌는 부분을 파악하여 바뀌는 부분을 제거하면 안 바뀌는 부분을 알 수 있음 
- 안 바뀌는 부분만 있으면 정상
- 데이터가 정상이면 더 이상 알아야될 것이 없음
- 변화하는 부분을 찾기 위해 정상성 검정을 하는 것
### ACF (Auto Correlation Function)
- 1시점, 2시점, 3시점, ... 간격으로 상관을 구한 것
- 자기상관의 패턴을 보고 정상인지 비성장인지 판단할 수 있음
- 비정상(non-stationary) 시계열의 ACF - 천천히 감소
- 정상(stationary) 시계열의 ACF - 빠른 속도로 감소
    - ACF가 감소하는 속도를 보고 정상인지, 비정상인지 판단 / 주관적임
- ACF 그래프를 보고 계절성도 판단할 수 있음
### PACF(Partial ACF)    
- 1월이 3월에 영향을 주는 것과 1월이 2월을 거쳐 3월에 영향을 주는 것은 다름
- 간접적으로 영향을 주는 것을 제외
- PACF는 순수하게 시점 간 상관만 추출한 것
### Augmented Dickey-Fuller Test
- 시계열이 정상(stationary)인지 검정
- p < .05 이면 정상
### 차분 (Differencing)
- 시계열 데이터를 직전/직후 시점간의 차이로 바꾸는 것
- 선형적인 추세가 있으면 시계열이 비정상(non-stationary)
- 차분으로 선형적 추세를 제거
### SARIMAX
- S / AR / I / MA / X 를 합쳐놓은 것
- 전통적인 시계열 분석의 끝판왕
- MA모형 : 데이터가 평균을 따라간다
- ARMA는 ACF랑 PACR를 보는 것, 끊기는 지점
- p,d,q,P,D,Q,m을 정해줘야 함
- 플롯, ACF, PACF 등등을 보면서 정함
- 여러 가지 숫자를 넣어가며 AIC, BIC등을 확인한다
- 기존 데이터의 마지막 부분을 예측하여 오차를 확인한다